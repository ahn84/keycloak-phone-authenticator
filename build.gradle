plugins {
    id 'java'
}

group 'com.hfx'
version '1.0-SNAPSHOT'
ext {
    keycloak_version = '11.0.3'
    jboss_logging_version = '3.3.2.Final'
}
apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
    implementation "org.keycloak:keycloak-core:${keycloak_version}"
    implementation "org.keycloak:keycloak-server-spi:${keycloak_version}"
    implementation "org.keycloak:keycloak-server-spi-private:${keycloak_version}"
    implementation "org.keycloak:keycloak-services:${keycloak_version}"
    implementation "org.keycloak:keycloak-model-jpa:${keycloak_version}"
    implementation "javax.persistence:javax.persistence-api:2.2"
    testImplementation group: 'junit', name: 'junit', version: '4.12'
}

task buildJar(type: Jar) {
    zip64 true
    from {
        // bundle only 'compile' dependencies into the jar
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
    {
        exclude "META-INF/*.SF"
        exclude "META-INF/*.DSA"
        exclude "META-INF/*.RSA"
    }
    with jar
}

